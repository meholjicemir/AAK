function ShowAlert(e, n, t, o, r) { alertNo++; var a = "divAlert_" + alertNo.toString(), i = ""; switch (e) { case "info": i = "alert-info"; break; case "success": i = "alert-success"; break; case "warning": i = "alert-warning"; break; case "danger": i = "alert-danger"; break; default: i = "alert-info" } var d = '<div id="' + a + '" class="alert ' + i + ' fade in" style="display: none;>             <a href="#" class="close" aria-label="close" onclick="$(\'#' + a + "').hide();\">&times;</a>             <strong><span>" + n + "</span></strong>         </div"; void 0 == r ? $("#divAlertGeneral").append(d) : r.append(d), (void 0 == o || null == o) && (o = 3e3), 1 == t ? $("#" + a).fadeTo(o, 500) : $("#" + a).fadeTo(o, 500).slideUp(500), window.scrollTo(0, 0) } function ShowLoader(e, n) { (void 0 == n || null == n) && (n = $("#divLoading")), noOfLoadersRunning++, 1 == noOfLoadersRunning && (e ? n.show() : n.slideDown(200)) } function HideLoader(e, n) { (void 0 == n || null == n) && (n = $("#divLoading")), noOfLoadersRunning--, 0 > noOfLoadersRunning && (noOfLoadersRunning = 0), 0 == noOfLoadersRunning && (e ? n.hide() : n.slideUp(200)) } function GetQueryStringParameterByName(e, n) { n || (n = window.location.href), e = e.replace(/[\[\]]/g, "\\$&"); var t = new RegExp("[?&]" + e + "(=([^&#]*)|&|#|$)"), o = t.exec(n); return o ? o[2] ? decodeURIComponent(o[2].replace(/\+/g, " ")) : "" : null } function pad(e, n) { for (var t = e + ""; t.length < n;) t = "0" + t; return t } function ConvertDateToUSFormatString(e, n) { var t = ""; return t = n === !0 ? pad(e.getMonth() + 1, 2) + "/" + pad(e.getDate(), 2) + "/" + pad(e.getFullYear(), 4) : pad(e.getMonth() + 1, 2) + "/" + pad(e.getDate(), 2) + "/" + pad(e.getFullYear(), 4) + " " + pad(e.getHours(), 2) + ":" + pad(e.getMinutes(), 2) + ":" + pad(e.getSeconds(), 2) } function ConvertBSDateToUSDateString(e) { if (null == e) return null; var n = e.split("."); return n[1] + "/" + n[0] + "/" + n[2] } function ShowPrompt(e, n, t, o) { $("#promptTitle").html(e), $("#promptMessage").html(n), $("#btnPromptYes").off("click"), $("#btnPromptNo").off("click"), $("#btnPromptYes").click(t), $("#btnPromptNo").click(o), $("#btnOpenModalPrompt").trigger("click") } function SetUserInfo() { $("#linkLogOut").length > 0 && $("#linkLogOut").click(function () { LogOut() }), $("#divCurrentUser").slideDown(500), $("#btnCurrentUser").html("Welcome, " + CurrentUser.UserName) } function LogOut() { window.location.href = "../DashBoard/frmLogout.aspx" } function GetMoneyFormat(e) { var n = AddThousandsSeparator(parseFloat(Math.round(100 * e) / 100).toFixed(2)) + " KM"; return n = n.replace(/,/g, "#").replace(/\./g, ",").replace(/#/g, ".") } function AddThousandsSeparator(e) { e += ""; for (var n = e.split("."), t = n[0], o = n.length > 1 ? "." + n[1] : "", r = /(\d+)(\d{3})/; r.test(t) ;) t = t.replace(r, "$1,$2"); return t + o } function GetCurrentDateUSFormat() { var e = new Date, n = e.getDate(), t = e.getMonth() + 1, o = e.getFullYear(); return 10 > n && (n = "0" + n), 10 > t && (t = "0" + t), t + "/" + n + "/" + o } function GetDateUSFormat(e) { var n = e.getDate(), t = e.getMonth() + 1, o = e.getFullYear(); return 10 > n && (n = "0" + n), 10 > t && (t = "0" + t), t + "/" + n + "/" + o } function GetDateUSFormatFromJSON(e) { return GetDateUSFormat(new Date(parseInt(e.substr(6)))) } function DateSorterFunction(e, n) { if ((void 0 == e || null == e) && (e = ""), (void 0 == n || null == n) && (n = ""), "" == e && "" == n) return 0; if ("" == e) return -1; if ("" == n) return 1; var t = new Date(e), o = new Date(n); return t == o ? 0 : t > o ? 1 : -1 } function CreateNewDocument(e, n, t, o, r, a) { if (null != e) { ShowLoader(); var i = new FormData; i.append("UploadedFiles", e), i.append("AccessToken", CurrentUser.AccessToken), i.append("NodeForGrid", t.Path.replace(/\\/g, "/")), i.append("FileName", MakeStringValidPath(n)), i.append("CaseId", o), i.append("ForceOverwrite", r), $.ajax({ url: WebAPIURL + "/fileupload", type: "POST", data: i, cache: !1, contentType: !1, processData: !1 }).done(function (e) { e ? -1 == e ? (ShowAlert("danger", "File name exists, please choose another name."), HideLoader()) : (e.UserId = CurrentUser.Id, HideLoader(), SaveDocumentToDB(e, a)) : (HideLoader(), ShowAlert("danger", "Unknown error creating document.")) }).fail(function (e) { HideLoader(), 403 == e.status ? (ShowAlert("danger", "Session expired. Please log in again.", !0), LogOut()) : ShowAlert("danger", "POST request to " + WebAPIURL + "api/fileupload failed.") }) } } function MakeStringValidPath(e) { for (var n = 0; n < e.length; n++) { var t = pathInvalidCharCodes.indexOf(e.charCodeAt(n)); t >= 0 && (e = e.replace(String.fromCharCode(pathInvalidCharCodes[t]), ""), n--) } return e } function ShowLoaderCenter() { noOfCenterLoadersRunning++, 1 == noOfCenterLoadersRunning && $("body").append('<div class="loader-center"><span class="glyphicon glyphicon-refresh spinning"></span></div>') } function HideLoaderCenter() { noOfCenterLoadersRunning--, 0 == noOfCenterLoadersRunning && $(".loader-center").remove() } function GetDataFromMultiselect(e) { var n = $("#" + e), t = null == n.val() ? "" : n.val().toString(); return t } function SetupHistoryHandling() { $(document).mousedown(function () { clearTimeout(window.userInteractionTimeout), window.userInteractionInHTMLArea = !0, window.userInteractionTimeout = setTimeout(function () { window.userInteractionInHTMLArea = !1 }, 500) }), $(document).keydown(function () { clearTimeout(window.userInteractionTimeout), window.userInteractionInHTMLArea = !0, window.userInteractionTimeout = setTimeout(function () { window.userInteractionInHTMLArea = !1 }, 500) }), window.history && window.history.pushState && $(window).on("popstate", function () { window.onBrowserHistoryButtonClicked && window.onBrowserHistoryButtonClicked() }) } var noOfLoadersRunning = 0, noOfCenterLoadersRunning = 0, alertNo = 0, pathInvalidCharCodes = [34, 60, 62, 124, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 58, 42, 63, 92, 47]; $(window).scroll(function (e) { var n = $(".loading-bar"), t = "fixed" == n.css("position"); if ($(this).scrollTop() > 77 && !t) { var o = .96 * $(document).width(); $(".loading-bar").css({ position: "fixed", top: "0px" }), o > 0 && $(".loading-bar").css("width", o.toString() + "px") } if ($(this).scrollTop() < 77 && t) { var o = .96 * $(document).width(); $(".loading-bar").css({ position: "static", top: "0px" }), o > 0 && $(".loading-bar").css("width", o.toString() + "px") } });